var i=this&&this.__awaiter||function(t,a,r,l){return new(r=r||Promise)(function(i,o){function s(t){try{n(l.next(t))}catch(t){o(t)}}function e(t){try{n(l.throw(t))}catch(t){o(t)}}function n(t){var o;t.done?i(t.value):((o=t.value)instanceof r?o:new r(function(t){t(o)})).then(s,e)}n((l=l.apply(t,a||[])).next())})},e=this&&this.__generator||function(i,s){var e,n,a,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:o(0),throw:o(1),return:o(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function o(o){return function(t){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,n=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=0<(a=r.trys).length&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=s.call(i,r)}catch(t){o=[6,t],n=0}finally{e=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,t])}}},o=function(){function t(t,o){this.elements={body:$("body"),wrapper:$("#offy-outer"),wrapperInner:$("#offy-inner"),overlay:$(".offy-overlay"),navbar:$(".offy-navbar"),triggerTop:$("#offy-trigger-top")},this.cssClass={overlay:"offy-overlay",scroll:"offy-scroll",scrollUp:"offy-scroll-up",scrollDown:"offy-scroll-down",active:"offy-active",expanded:"offy-expanded",expandedTop:"offy-expanded-top",menuShadow:"offy-menu-shadow",overlayShadow:"offy-overlay-shadow"},this.config=t||{},this.offyConfig=o,this.$menu=t.$menu,this.expandedClass=t.expandedClass,0!=this.$menu.length&&this.expandedClass&&(this.$trigger=t.$trigger||[],this.$container=t.$container||this.elements.body,this.$overlay=t.$overlay||this.elements.overlay,this.$navbar=t.$navbar||this.elements.navbar,this.$wrapper=t.$wrapper||this.elements.wrapper,this.wrapper=this.$wrapper[0],this.$wrapperInner=t.$wrapperInner||this.elements.wrapperInner,this.dragHandleOffset=t.dragHandleOffset||this.$trigger.outerWidth(),this.expandedWidth=this.$menu.outerWidth(),this.position=t.position||"left",this.menuShadow=!1,void 0!==t.layout&&void 0!==t.layout.menuShadow&&(this.menuShadow=t.layout.menuShadow),this.overlayShadow=!1,void 0!==this.offyConfig.get().global.layout&&void 0!==this.offyConfig.get().global.layout.overlayShadow&&(this.overlayShadow=this.offyConfig.get().global.layout.overlayShadow),void 0!==t.callbacks?("function"==typeof t.callbacks.onShow?this.onShow=t.callbacks.onShow:void 0!==this.offyConfig.get().global.callbacks&&"function"==typeof this.offyConfig.get().global.callbacks.onShow&&(this.onShow=this.offyConfig.get().global.callbacks.onShow),"function"==typeof t.callbacks.onHide?this.onHide=t.callbacks.onHide:void 0!==this.offyConfig.get().global.callbacks&&"function"==typeof this.offyConfig.get().global.callbacks.onHide&&(this.onHide=this.offyConfig.get().global.callbacks.onHide)):void 0!==this.offyConfig.get().global.callbacks&&("function"==typeof this.offyConfig.get().global.callbacks.onShow&&(this.onShow=this.offyConfig.get().global.callbacks.onShow),"function"==typeof this.offyConfig.get().global.callbacks.onHide&&(this.onHide=this.offyConfig.get().global.callbacks.onHide)),this.init(),this.start=null)}return t.prototype.init=function(){this.initGlobal(),this.initOverlay(),this.initTrigger(),this.initScroll(),this.initTouchEvents()},t.prototype.initGlobal=function(){this.menuShadow&&this.$menu.addClass(this.cssClass.menuShadow),this.overlayShadow&&this.$overlay.addClass(this.cssClass.overlayShadow)},t.prototype.initOverlay=function(){this.$overlay.length||(this.$overlay=$("<div></div>").addClass(this.cssClass.overlay),this.$wrapperInner.prepend(this.$overlay))},t.prototype.initTrigger=function(){var o=this;0<this.$trigger.length&&this.$trigger.bind("click",function(){var t=o.$container.hasClass(o.expandedClass)?"removeClass":"addClass";o.toggleView(t)})},t.prototype.initScroll=function(){var i=this;this.lastScrollTop=0,this.$container.scroll(function(t){var o=$(this).scrollTop();if(o<=60)return i.$container.removeClass(i.cssClass.scroll),i.$container.removeClass(i.cssClass.scrollUp),i.$container.removeClass(i.cssClass.scrollDown),i.$container.css("padding-top","0px"),void(i.lastScrollTop=o);o>i.lastScrollTop?(i.$container.addClass(i.cssClass.scroll),i.$container.addClass(i.cssClass.scrollDown),i.$container.css("padding-top","60px"),i.$container.removeClass(i.cssClass.scrollUp)):(i.$container.addClass(i.cssClass.scroll),i.$container.removeClass(i.cssClass.scrollDown),i.$container.css("padding-top","60px"),i.$container.addClass(i.cssClass.scrollUp)),i.lastScrollTop=o})},t.prototype.initTouchEvents=function(){this.wrapper.addEventListener&&"top"!==this.position&&(this.wrapper.addEventListener("touchstart",this,!1),this.wrapper.addEventListener("touchmove",this,!1),this.wrapper.addEventListener("touchend",this,!1),this.wrapper.addEventListener("touchcancel",this,!1))},t.prototype.handleEvent=function(t){switch(t.type){case"touchstart":this.onTouchStart(t);break;case"touchmove":this.onTouchMove(t);break;case"touchcancel":case"touchend":this.onTouchEnd(t)}},t.prototype.currentPosition=function(){return"left"==this.position?this.$menu.offset().left+this.expandedWidth:this.$menu.offset().left},t.prototype.inBounds=function(t){return"left"==this.position&&0<=t&&t<=this.expandedWidth||t>=-this.expandedWidth&&t<=0},t.prototype.onTouchStart=function(t){var o=t.touches[0].pageX;this.currentPosition()-this.dragHandleOffset>o||this.currentPosition()+this.dragHandleOffset<o||(this.start={startingX:this.currentPosition(),pageX:o,pageY:t.touches[0].pageY},this.deltaX=this.$wrapper.position().left,this.isScrolling=void 0,this.wrapper.style.MozTransitionDuration=this.wrapper.style.webkitTransitionDuration=0,t.stopPropagation())},t.prototype.onTouchMove=function(t){var o;this.start&&(this.deltaX=t.touches[0].pageX-this.start.pageX,void 0===this.isScrolling&&(this.isScrolling=!!(this.isScrolling||Math.abs(this.deltaX)<Math.abs(t.touches[0].pageY-this.start.pageY))),this.isScrolling||(t.preventDefault(),o="left"==this.position?this.start.startingX+this.deltaX:this.deltaX-($(window).width()-this.start.startingX),this.inBounds(o)&&(this.wrapper.style.MozTransform=this.wrapper.style.webkitTransform="translate3d("+o+"px,0,0)",t.stopPropagation())))},t.prototype.onTouchEnd=function(t){var o;this.start&&(this.isScrolling||(o="left"==this.position&&0<this.deltaX||"right"==this.position&&this.deltaX<0,this.$wrapper.attr("style",""),"removeClass"!=(o=o?"addClass":"removeClass")||this.$container.hasClass("offy-expanded-"+this.position)||(o="addClass"),this.toggleView(o)),this.start=null,t.stopPropagation())},t.prototype.toggleView=function(s){return i(this,void 0,void 0,function(){var o,i;return e(this,function(t){switch(t.label){case 0:return i=0,(o=this).$trigger.css("pointer-events","none"),"top"!==this.position&&this.$container.hasClass(this.cssClass.expandedTop)&&(this.elements.triggerTop.removeClass(this.cssClass.active),this.$container.removeClass(this.cssClass.expanded),this.$container.removeClass(this.cssClass.expandedTop),i=400),[4,o.afterToggleView(i,s)];case 1:return t.sent(),this.overlayClickBinding(s),[2]}})})},t.prototype.overlayClickBinding=function(t){var o=this;"addClass"===t&&"top"!==this.position?this.$overlay.unbind("click").bind("click",function(){o.$trigger.click()}):this.$overlay.unbind("click")},t.prototype.onShow=function(t){},t.prototype.onHide=function(t){},t.prototype.wait=function(o){return i(this,void 0,void 0,function(){return e(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){return setTimeout(function(){return t()},o)}).then(function(){return console.log("fired")})];case 1:return t.sent(),[2]}})})},t.prototype.afterToggleView=function(o,s){return i(this,void 0,void 0,function(){var i;return e(this,function(t){switch(t.label){case 0:return i=this,[4,new Promise(function(t){return setTimeout(function(){return t()},o)}).then(function(){i.$trigger[s](i.cssClass.active).css("pointer-events","all"),i.$container[s](i.cssClass.expanded),i.$container[s](i.expandedClass);var t={bubbles:!0,cancelable:!0,detail:{position:i.position}},o="offy-";"addClass"===s?(i.onShow(t.detail),o+="expanded"):(i.onHide(t.detail),o+="condensed");t=new CustomEvent(o,t);i.$container[0].dispatchEvent(t)})];case 1:return t.sent(),[2]}})})},t.prototype.open=function(){this.$trigger.click()},t.prototype.close=function(){this.$trigger.click()},t.prototype.toggle=function(){this.$trigger.click()},t}(),s=function(){function t(t){this.config=t}return t.prototype.get=function(t){return this.config},t}(),Offy=function(){function Offy(t){this.instances=["top","left","right"],this.config=new s(t||{}),this.init()}return Offy.prototype.init=function(){for(var t in this.instances)this.config.get()[this.instances[t]]&&(this[this.instances[t]]=new o(this.config.get()[this.instances[t]],this.config))},Offy}();